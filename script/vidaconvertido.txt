ALTER TABLE ESTOQUEESCRITURADO DROP CONSTRAINT FK_ESTOQUEESCRITURADO_PRODUTO;

ALTER TABLE ESTOQUEESCRITURADO
ADD CONSTRAINT FK_ESTOQUEESCRITURADO_PRODUTO
FOREIGN KEY (PRODUTO)
REFERENCES PRODUTO(CODIGO)
ON DELETE CASCADE
USING INDEX FK_ESTOQUEESCRITURADO_PRODUTO;

ALTER TABLE ESTOQUEESCRITURADODATA DROP CONSTRAINT FK_ESTOQUEESCRITURADODATA_PRO;

ALTER TABLE ESTOQUEESCRITURADODATA
ADD CONSTRAINT FK_ESTOQUEESCRITURADODATA_PRO
FOREIGN KEY (PRODUTO)
REFERENCES PRODUTO(CODIGO)
ON DELETE CASCADE
USING INDEX FK_ESTOQUEESCRITURADODATA_PRO;


ALTER TRIGGER TRIGGER_NF_BLOQUEARDELETE INACTIVE; COMMIT;
ALTER TRIGGER TRIGGER_EXCLUIRPEDIDO INACTIVE; COMMIT;
ALTER TRIGGER TRIGGER_ITEMROMANEIO_PEDIDO INACTIVE; COMMIT;


UPDATE CLIFOR SET FILIAL = 2; COMMIT;
DELETE FROM ADIANTAMENTO WHERE ADIANTAMENTO.FILIAL = 1; COMMIT;
DELETE FROM ADMCARTAO WHERE ADMCARTAO.FILIAL = 1; COMMIT;
DELETE FROM APONTAMENTOPRODUCAO WHERE APONTAMENTOPRODUCAO.FILIAL = 1; COMMIT;
DELETE FROM ARMAZENAMENTO WHERE ARMAZENAMENTO.FILIAL = 1; COMMIT;
DELETE FROM AUTORIZACAO WHERE AUTORIZACAO.FILIAL = 1; COMMIT;
DELETE FROM AUTORIZACAOVENDAFORAROTA WHERE AUTORIZACAOVENDAFORAROTA.FILIAL = 1; COMMIT;
DELETE FROM BALANCO WHERE BALANCO.FILIAL = 1; COMMIT;
DELETE FROM BLOCOX WHERE BLOCOX.FILIAL = 1; COMMIT;
DELETE FROM BOLETO WHERE BOLETO.FILIAL = 1; COMMIT;
DELETE FROM BONIFICACAO WHERE BONIFICACAO.FILIAL = 1; COMMIT;
DELETE FROM CFE WHERE CFE.FILIAL = 1; COMMIT;
DELETE FROM CHEQUE WHERE CHEQUE.FILIAL = 1; COMMIT;
DELETE FROM CLIFORLIBERARBLOQUEIO WHERE CLIFORLIBERARBLOQUEIO.FILIAL = 1; COMMIT;
DELETE FROM COBRANCA WHERE COBRANCA.FILIAL = 1; COMMIT;
DELETE FROM CODIGO WHERE CODIGO.FILIAL = 1; COMMIT;
DELETE FROM COLETA WHERE COLETA.FILIAL = 1; COMMIT;
DELETE FROM COMBO WHERE COMBO.FILIAL = 1; COMMIT;
DELETE FROM COMISSAOPROGRESSIVA WHERE COMISSAOPROGRESSIVA.FILIAL = 1; COMMIT;
DELETE FROM COMODATO WHERE COMODATO.FILIAL = 1; COMMIT;
DELETE FROM COMPRA WHERE COMPRA.FILIAL = 1; COMMIT;
DELETE FROM NFMENSAGEMFISCAL WHERE NFMENSAGEMFISCAL.IDNF IN (SELECT ID FROM NF WHERE FILIAL = 1); COMMIT;
DELETE FROM EVENTONFE WHERE EVENTONFE.IDNF IN (SELECT ID FROM NF WHERE FILIAL = 1); COMMIT;
DELETE FROM NFREFERENCIADA WHERE NFREFERENCIADA.IDNF IN (SELECT ID FROM NF WHERE FILIAL = 1); COMMIT;
DELETE FROM NFEENVIOEMAIL WHERE NFEENVIOEMAIL.IDNF IN (SELECT ID FROM NF WHERE FILIAL = 1); COMMIT;
DELETE FROM LOTENFE WHERE LOTENFE.IDNF IN (SELECT ID FROM NF WHERE FILIAL = 1); COMMIT;
DELETE FROM NF WHERE NF.FILIAL = 1; COMMIT;
DELETE FROM CONFERENCIA WHERE CONFERENCIA.IDPEDIDO IN (SELECT PEDIDO.ID FROM PEDIDO WHERE PEDIDO.FILIAL = 1); COMMIT;
DELETE FROM PEDIDOMESCLADO WHERE PEDIDOMESCLADO.FILIALORIGEM = 1; COMMIT;
DELETE FROM ITEMPEDIDORETORNO WHERE ITEMPEDIDORETORNO.IDPEDIDO IN (SELECT PEDIDO.ID FROM PEDIDO WHERE PEDIDO.FILIAL = 1); COMMIT;
DELETE FROM PEDIDO WHERE PEDIDO.FILIAL = 1; COMMIT;
DELETE FROM CONDICAOCOMERCIALCLIFOR WHERE CONDICAOCOMERCIALCLIFOR.CONDICAOCOMERCIAL IN (SELECT CODIGO FROM CONDICAOCOMERCIAL WHERE FILIAL = 1); COMMIT;
DELETE FROM CONDICAOCOMERCIAL WHERE CONDICAOCOMERCIAL.FILIAL = 1; COMMIT;
DELETE FROM CONFERENCIA WHERE CONFERENCIA.FILIAL = 1; COMMIT;
DELETE FROM CONFERENCIAFILTROCLASSE WHERE CONFERENCIAFILTROCLASSE.FILIAL = 1; COMMIT;
DELETE FROM CONFERENCIAFILTROGRUPO WHERE CONFERENCIAFILTROGRUPO.FILIAL = 1; COMMIT;
DELETE FROM CONFERENCIAFILTROUNIDADE WHERE CONFERENCIAFILTROUNIDADE.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURACOMISSAO WHERE CONFIGURACOMISSAO.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARAFVFILIAL WHERE CONFIGURARAFVFILIAL.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARAFVFUNCIONARIO WHERE CONFIGURARAFVFUNCIONARIO.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARCERTIFICADOFILIAL WHERE CONFIGURARCERTIFICADOFILIAL.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARCFEFILIAL WHERE CONFIGURARCFEFILIAL.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARCTEFILIAL WHERE CONFIGURARCTEFILIAL.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARGNREFILIAL WHERE CONFIGURARGNREFILIAL.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARLICITACAOFILIAL WHERE CONFIGURARLICITACAOFILIAL.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARNFCEFILIAL WHERE CONFIGURARNFCEFILIAL.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARNFEFILIAL WHERE CONFIGURARNFEFILIAL.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARPAFFILIAL WHERE CONFIGURARPAFFILIAL.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARPCPFILIAL WHERE CONFIGURARPCPFILIAL.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARPEDIDOFILIAL WHERE CONFIGURARPEDIDOFILIAL.FILIAL = 1; COMMIT;
DELETE FROM CONFIGURARWMSFILIAL WHERE CONFIGURARWMSFILIAL.FILIAL = 1; COMMIT;
DELETE FROM CONSUMO WHERE CONSUMO.FILIAL = 1; COMMIT;
DELETE FROM TRANSFERENCIA WHERE TRANSFERENCIA.CONTAORIGEM IN (SELECT CONTA.CODIGO FROM CONTA WHERE FILIAL = 1); COMMIT;
DELETE FROM TRANSFERENCIA WHERE TRANSFERENCIA.CONTADESTINO IN (SELECT CONTA.CODIGO FROM CONTA WHERE FILIAL = 1); COMMIT;
DELETE FROM OCORRENCIAFINANCEIRO WHERE OCORRENCIAFINANCEIRO.FILIAL = 1; COMMIT;
UPDATE FINANCEIRO SET FINANCEIRO.ORIGEMFILIAL = NULL WHERE FINANCEIRO.ORIGEMFILIAL = 1; COMMIT;
UPDATE FINANCEIRO SET FINANCEIRO.CONTA = NULL WHERE FINANCEIRO.FILIAL <> 1 AND FINANCEIRO.CONTA IN (SELECT CONTA.CODIGO FROM CONTA WHERE CONTA.FILIAL = 1); COMMIT;
UPDATE FILIAL SET CONTA = 1001 WHERE FILIAL.CODIGO = 1; COMMIT;
DELETE FROM FINANCEIRO WHERE FINANCEIRO.FILIAL = 1; COMMIT;
DELETE FROM CAIXA WHERE CAIXA.CONTA IN (SELECT CONTA.CODIGO FROM CONTA WHERE CONTA.FILIAL = 1); COMMIT;
UPDATE FORMAPAGAMENTO SET CONTA = NULL WHERE FORMAPAGAMENTO.CONTA IN (SELECT CONTA.CODIGO FROM CONTA WHERE CONTA.FILIAL = 1); COMMIT;
DELETE FROM CONTA WHERE CONTA.FILIAL = 1; COMMIT;
DELETE FROM CONTINGENCIANFE WHERE CONTINGENCIANFE.FILIAL = 1; COMMIT;
DELETE FROM CONTROLEANALISE WHERE CONTROLEANALISE.FILIAL = 1; COMMIT;
DELETE FROM CONTROLEETIQUETA WHERE CONTROLEETIQUETA.FILIAL = 1; COMMIT;
DELETE FROM COTA WHERE COTA.FILIAL = 1; COMMIT;
DELETE FROM CSC WHERE CSC.FILIAL = 1; COMMIT;
DELETE FROM CT WHERE CT.FILIAL = 1; COMMIT;
DELETE FROM CUPOM WHERE CUPOM.FILIAL = 1; COMMIT;
DELETE FROM CUPOMNAOFISCAL WHERE CUPOMNAOFISCAL.FILIAL = 1; COMMIT;
DELETE FROM DATA WHERE DATA.FILIAL = 1; COMMIT;
DELETE FROM DATAMOVIMENTO WHERE DATAMOVIMENTO.FILIAL = 1; COMMIT;
DELETE FROM DESPESA WHERE DESPESA.FILIAL = 1; COMMIT;
DELETE FROM DEVOLUCAO WHERE DEVOLUCAO.FILIAL = 1; COMMIT;
DELETE FROM DFE WHERE DFE.FILIAL = 1; COMMIT;
DELETE FROM DFENSU WHERE DFENSU.FILIAL = 1; COMMIT;
DELETE FROM DRE WHERE DRE.FILIAL = 1; COMMIT;
DELETE FROM ECF WHERE ECF.FILIAL = 1; COMMIT;
DELETE FROM ENCARGO WHERE ENCARGO.FILIAL = 1; COMMIT;
DELETE FROM ENVIOEMAIL WHERE ENVIOEMAIL.FILIAL = 1; COMMIT;
DELETE FROM LOGPRODUTOATIVO WHERE LOGPRODUTOATIVO.FILIAL = 1; COMMIT;
DELETE FROM PRECOESTADO WHERE PRECOESTADO.FILIAL = 1; COMMIT;
DELETE FROM ESTOQUE WHERE ESTOQUE.FILIAL = 1; COMMIT;
DELETE FROM ESTOQUEESCRITURADO WHERE ESTOQUEESCRITURADO.FILIAL = 1; COMMIT;
DELETE FROM ESTOQUEESCRITURADODATA WHERE ESTOQUEESCRITURADODATA.FILIAL = 1; COMMIT;
DELETE FROM EVENTOLOG WHERE EVENTOLOG.FILIAL = 1; COMMIT;
DELETE FROM FALTA WHERE FALTA.FILIAL = 1; COMMIT;
DELETE FROM FCI WHERE FCI.FILIAL = 1; COMMIT;
DELETE FROM FECHAMENTOCOLETA WHERE FECHAMENTOCOLETA.FILIAL = 1; COMMIT;
DELETE FROM FICHATECNICA WHERE FICHATECNICA.FILIAL = 1; COMMIT;
DELETE FROM FLEX WHERE FLEX.FILIAL = 1; COMMIT;
DELETE FROM GEOLOCALIZACAO WHERE GEOLOCALIZACAO.FILIAL = 1; COMMIT;
DELETE FROM GNRE WHERE GNRE.FILIAL = 1; COMMIT;
DELETE FROM IDENTIFICACAOPAFECF WHERE IDENTIFICACAOPAFECF.FILIAL = 1; COMMIT;
DELETE FROM IEST WHERE IEST.FILIAL = 1; COMMIT;
DELETE FROM IMPOSTO WHERE IMPOSTO.FILIAL = 1; COMMIT;
DELETE FROM INCENTIVO WHERE INCENTIVO.FILIAL = 1; COMMIT;
DELETE FROM INCENTIVOQUALIDADE WHERE INCENTIVOQUALIDADE.FILIAL = 1; COMMIT;
DELETE FROM LICITACAO WHERE LICITACAO.FILIAL = 1; COMMIT;
DELETE FROM LOCAL WHERE LOCAL.FILIAL = 1; COMMIT;
DELETE FROM LOG WHERE LOG.FILIAL = 1; COMMIT;
DELETE FROM LOTE WHERE LOTE.FILIAL = 1; COMMIT;
DELETE FROM MANIFESTACAODESTINATARIO WHERE MANIFESTACAODESTINATARIO.FILIAL = 1; COMMIT;
DELETE FROM MDFE WHERE MDFE.FILIAL = 1; COMMIT;
DELETE FROM ITEMMETAFORNECEDORFUNCIONARIO WHERE META IN (SELECT CODIGO FROM META WHERE FILIAL = 1); COMMIT;
DELETE FROM ITEMMETAMARCAFUNCIONARIO WHERE META IN (SELECT CODIGO FROM META WHERE FILIAL = 1); COMMIT;
DELETE FROM ITEMMETAFUNCIONARIO WHERE META IN (SELECT CODIGO FROM META WHERE FILIAL = 1); COMMIT;
DELETE FROM ITEMMETAFORNECEDOR WHERE META IN (SELECT CODIGO FROM META WHERE FILIAL = 1); COMMIT;
DELETE FROM ITEMMETACLASSEFUNCIONARIO WHERE META IN (SELECT CODIGO FROM META WHERE FILIAL = 1); COMMIT;
DELETE FROM ITEMMETACLASSIFICACAOFUNC WHERE META IN (SELECT CODIGO FROM META WHERE FILIAL = 1); COMMIT;
DELETE FROM ITEMMETAPRODUTO WHERE META IN (SELECT CODIGO FROM META WHERE FILIAL = 1); COMMIT;
DELETE FROM META WHERE META.FILIAL = 1; COMMIT;
DELETE FROM MIX WHERE MIX.FILIAL = 1; COMMIT;
DELETE FROM MONITORARESTOQUE WHERE MONITORARESTOQUE.FILIAL = 1; COMMIT;
DELETE FROM MOVIMENTOESTOQUE WHERE MOVIMENTOESTOQUE.FILIAL = 1; COMMIT;
DELETE FROM NAOVENDA WHERE NAOVENDA.FILIAL = 1; COMMIT;
DELETE FROM NFREFERENCIADA WHERE NFREFERENCIADA.FILIAL = 1; COMMIT;
DELETE FROM NSU WHERE NSU.FILIAL = 1; COMMIT;
DELETE FROM NSUESTOQUE WHERE NSUESTOQUE.FILIAL = 1; COMMIT;
DELETE FROM NSUREINICIO WHERE NSUREINICIO.FILIAL = 1; COMMIT;
DELETE FROM ORDEMPRODUCAO WHERE ORDEMPRODUCAO.FILIAL = 1; COMMIT;
DELETE FROM ORDEMTRANSFERENCIA WHERE ORDEMTRANSFERENCIA.FILIAL = 1; COMMIT;
DELETE FROM PAUSACONFERENCIA WHERE PAUSACONFERENCIA.FILIAL = 1; COMMIT;
DELETE FROM PERFILACESSO WHERE PERFILACESSO.FILIAL = 1; COMMIT;
DELETE FROM PESQUISA WHERE PESQUISA.FILIAL = 1; COMMIT;
DELETE FROM PRONTAENTREGA WHERE PRONTAENTREGA.FILIAL = 1; COMMIT;
DELETE FROM REGRACOMERCIALDESCONTO; COMMIT;
DELETE FROM REGRACOMERCIALFUNCIONARIO; COMMIT;
DELETE FROM REGRACOMERCIALSOMA; COMMIT;
DELETE FROM REGRACOMERCIALGRUPO; COMMIT;
DELETE FROM REGRACOMERCIAL WHERE REGRACOMERCIAL.FILIAL = 1; COMMIT;
DELETE FROM REGRADESCONTOPRODUTO WHERE REGRADESCONTO IN (SELECT CODIGO FROM REGRADESCONTO WHERE FILIAL = 1); COMMIT;
DELETE FROM REGRADESCONTOFUNCIONARIO WHERE REGRADESCONTO IN (SELECT CODIGO FROM REGRADESCONTO WHERE FILIAL = 1); COMMIT;
DELETE FROM REGRADESCONTOTIPOPEDIDO WHERE REGRADESCONTO IN (SELECT CODIGO FROM REGRADESCONTO WHERE FILIAL = 1); COMMIT;
DELETE FROM REGRADESCONTOCLIFOR WHERE REGRADESCONTO IN (SELECT CODIGO FROM REGRADESCONTO WHERE FILIAL = 1); COMMIT;
UPDATE ITEMPEDIDO SET ITEMPEDIDO.REGRADESCONTO = NULL WHERE ITEMPEDIDO.FILIAL <> 1 AND ITEMPEDIDO.REGRADESCONTO IN (SELECT CODIGO FROM REGRADESCONTO WHERE FILIAL = 1); COMMIT;
DELETE FROM REGRADESCONTO WHERE REGRADESCONTO.FILIAL = 1; COMMIT;
DELETE FROM REMESSA WHERE REMESSA.FILIAL = 1; COMMIT;
DELETE FROM ITEMROMANEIO WHERE ROMANEIO IN (SELECT CODIGO FROM ROMANEIO WHERE FILIAL = 1); COMMIT;
UPDATE FINANCEIRO SET ROMANEIO = NULL WHERE ROMANEIO IN (SELECT CODIGO FROM ROMANEIO WHERE FILIAL = 1); COMMIT;
UPDATE CAIXA SET ROMANEIO = NULL WHERE ROMANEIO IN (SELECT CODIGO FROM ROMANEIO WHERE FILIAL = 1); COMMIT;
DELETE FROM ROMANEIO WHERE ROMANEIO.FILIAL = 1; COMMIT;
DELETE FROM ROTACONTROLE WHERE ROTACONTROLE.ROTA IN (SELECT CODIGO FROM ROTA WHERE FILIAL = 1); COMMIT;
DELETE FROM ROTACLIFOR WHERE ROTA IN (SELECT CODIGO FROM ROTA WHERE FILIAL = 1); COMMIT;
DELETE FROM ROTA WHERE ROTA.FILIAL = 1; COMMIT;
DELETE FROM RUPTURA WHERE RUPTURA.FILIAL = 1; COMMIT;
DELETE FROM SELECAOIMPRESSAO WHERE SELECAOIMPRESSAO.FILIAL = 1; COMMIT;
DELETE FROM SERVICOTRIBUTACAO WHERE SERVICOTRIBUTACAO.FILIAL = 1; COMMIT;
DELETE FROM CARGOFUNCIONARIO WHERE CARGO IN (SELECT CODIGO FROM CARGO WHERE SETOR IN (SELECT CODIGO FROM SETOR WHERE FILIAL = 1)); COMMIT;
DELETE FROM CARGO WHERE SETOR IN (SELECT CODIGO FROM SETOR WHERE FILIAL = 1); COMMIT;
DELETE FROM SETOR WHERE SETOR.FILIAL = 1; COMMIT;
DELETE FROM TABELAPRECOTIPOPEDIDO WHERE TABELAPRECO IN (SELECT CODIGO FROM TABELAPRECO WHERE FILIAL = 1); COMMIT;
DELETE FROM TABELAPRECOFORMAPAGAMENTO WHERE TABELAPRECO IN (SELECT CODIGO FROM TABELAPRECO WHERE FILIAL = 1); COMMIT;
UPDATE TABELAPRECO SET TABELAPRECO = NULL WHERE TABELAPRECO IN (SELECT CODIGO FROM TABELAPRECO WHERE FILIAL = 1); COMMIT;
UPDATE TABELAPRECO SET FILIAL = 2 WHERE CODIGO = 1; COMMIT;
UPDATE TABELAPRECO SET FILIAL = 2 WHERE CODIGO = 75; COMMIT;
DELETE FROM TABELAPRECO WHERE TABELAPRECO.FILIAL = 1; COMMIT;
DELETE FROM TERMINAL WHERE TERMINAL.FILIAL = 1; COMMIT;
--DELETE FROM TIPOPEDIDO WHERE TIPOPEDIDO.FILIAL = 1; COMMIT;
UPDATE TIPOPEDIDO SET FILIAL = NULL WHERE FILIAL = 1; COMMIT;
DELETE FROM TOTALDIARIOFORMAPAGAMENTO WHERE TOTALDIARIOFORMAPAGAMENTO.FILIAL = 1; COMMIT;
DELETE FROM TRANSFERENCIA WHERE TRANSFERENCIA.FILIAL = 1; COMMIT;
DELETE FROM TROCA WHERE TROCA.FILIAL = 1; COMMIT;
DELETE FROM VALIDADE WHERE VALIDADE.FILIAL = 1; COMMIT;
DELETE FROM VALORPRODUCAO WHERE VALORPRODUCAO.FILIAL = 1; COMMIT;
DELETE FROM VIAGEM WHERE VIAGEM.FILIAL = 1; COMMIT;
DELETE FROM WST1LOTE WHERE WST1LOTE.FILIAL = 1; COMMIT;
DELETE FROM WST1REQUISICAO WHERE WST1REQUISICAO.FILIAL = 1; COMMIT;
DELETE FROM ESTOQUEESCRITURADODATA WHERE FILIAL = 1; COMMIT;
DELETE FROM ESTOQUEESCRITURADO WHERE FILIAL = 1; COMMIT;

DELETE FROM FILIAL WHERE CODIGO = 1; COMMIT;

DELETE FROM LOGPRODUTOATIVO WHERE
    PRODUTO NOT IN (SELECT PRODUTO FROM ITEMPEDIDO)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCOMPRA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM FALTA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM MOVIMENTOESTOQUE)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCONFERENCIA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMNF)
AND PRODUTO NOT IN (SELECT CODIGO FROM PRODUTO WHERE PRODUTO.MARCA = 4); COMMIT;

DELETE FROM TIPOPEDIDOPRODUTO WHERE
    PRODUTO NOT IN (SELECT PRODUTO FROM ITEMPEDIDO)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCOMPRA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM FALTA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM MOVIMENTOESTOQUE)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCONFERENCIA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMNF)
AND PRODUTO NOT IN (SELECT CODIGO FROM PRODUTO WHERE PRODUTO.MARCA = 4); COMMIT;

DELETE FROM ALTERAPRODUTO WHERE
    PRODUTO NOT IN (SELECT PRODUTO FROM ITEMPEDIDO)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCOMPRA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM FALTA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM MOVIMENTOESTOQUE)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCONFERENCIA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMNF)
AND PRODUTO NOT IN (SELECT CODIGO FROM PRODUTO WHERE PRODUTO.MARCA = 4); COMMIT;

DELETE FROM PRODUTOFUNCIONARIO WHERE
    PRODUTO NOT IN (SELECT PRODUTO FROM ITEMPEDIDO)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCOMPRA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM FALTA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM MOVIMENTOESTOQUE)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCONFERENCIA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMNF)
AND PRODUTO NOT IN (SELECT CODIGO FROM PRODUTO WHERE PRODUTO.MARCA = 4); COMMIT;

DELETE FROM ESTOQUEESCRITURADO WHERE
    PRODUTO NOT IN (SELECT PRODUTO FROM ITEMPEDIDO)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCOMPRA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM FALTA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM MOVIMENTOESTOQUE)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCONFERENCIA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMNF)
AND PRODUTO NOT IN (SELECT CODIGO FROM PRODUTO WHERE PRODUTO.MARCA = 4); COMMIT;

DELETE FROM PRODUTOCLIFOR WHERE
    PRODUTO NOT IN (SELECT PRODUTO FROM ITEMPEDIDO)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCOMPRA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM FALTA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM MOVIMENTOESTOQUE)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCONFERENCIA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMNF)
AND PRODUTO NOT IN (SELECT CODIGO FROM PRODUTO WHERE PRODUTO.MARCA = 4); COMMIT;

DELETE FROM REGRADESCONTOPRODUTO WHERE
    PRODUTO NOT IN (SELECT PRODUTO FROM ITEMPEDIDO)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCOMPRA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM FALTA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM MOVIMENTOESTOQUE)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMCONFERENCIA)
AND PRODUTO NOT IN (SELECT PRODUTO FROM ITEMNF)
AND PRODUTO NOT IN (SELECT CODIGO FROM PRODUTO WHERE PRODUTO.MARCA = 4); COMMIT;

DELETE FROM PRODUTO WHERE
    PRODUTO.CODIGO NOT IN (SELECT PRODUTO FROM ITEMPEDIDO)
AND PRODUTO.CODIGO NOT IN (SELECT PRODUTO FROM ITEMCOMPRA)
AND PRODUTO.CODIGO NOT IN (SELECT PRODUTO FROM FALTA)
AND PRODUTO.CODIGO NOT IN (SELECT PRODUTO FROM MOVIMENTOESTOQUE)
AND PRODUTO.CODIGO NOT IN (SELECT PRODUTO FROM ITEMCONFERENCIA)
AND PRODUTO.CODIGO NOT IN (SELECT PRODUTO FROM ITEMNF)
AND PRODUTO.MARCA <> 4; COMMIT;


ALTER TRIGGER TRIGGER_NF_BLOQUEARDELETE ACTIVE; COMMIT;
ALTER TRIGGER TRIGGER_EXCLUIRPEDIDO ACTIVE; COMMIT;
ALTER TRIGGER TRIGGER_ITEMROMANEIO_PEDIDO ACTIVE; COMMIT;

ALTER TABLE ESTOQUEESCRITURADODATA DROP CONSTRAINT FK_ESTOQUEESCRITURADODATA_PRO;

ALTER TABLE ESTOQUEESCRITURADODATA
ADD CONSTRAINT FK_ESTOQUEESCRITURADODATA_PRO
FOREIGN KEY (PRODUTO)
REFERENCES PRODUTO(CODIGO)
USING INDEX FK_ESTOQUEESCRITURADODATA_PRO;

ALTER TABLE ESTOQUEESCRITURADO DROP CONSTRAINT FK_ESTOQUEESCRITURADO_PRODUTO;

ALTER TABLE ESTOQUEESCRITURADO
ADD CONSTRAINT FK_ESTOQUEESCRITURADO_PRODUTO
FOREIGN KEY (PRODUTO)
REFERENCES PRODUTO(CODIGO)
USING INDEX FK_ESTOQUEESCRITURADO_PRODUTO;