SET TERM ^ ;

CREATE OR ALTER procedure cus_setpedido (
    numero integer,
    filial integer,
    clifor varchar(18),
    tipopedido integer,
    emissao date,
    entrega date,
    formapagamento integer,
    condicaopagamento integer,
    totalproduto numeric(8,2),
    totalretorno numeric(8,2),
    percdesconto numeric(8,2),
    valordesconto numeric(8,2),
    percacrescimo numeric(8,2),
    valoracrescimo numeric(8,2),
    valorfrete numeric(8,2),
    total numeric(8,2),
    pesobruto numeric(8,2),
    pesoliquido numeric(8,2),
    obs varchar(4096),
    funcionario integer,
    pedido varchar(10),
    impresso varchar(1),
    atualizado varchar(1),
    tabelapreco integer,
    contadorimpressao integer,
    cancelado varchar(1),
    faturado varchar(1),
    hora domain_hora,
    digitacao timestamp,
    totalqtdeproduto numeric(15,3),
    totalservico numeric(8,2),
    infadicional varchar(1048),
    comissao numeric(8,2),
    volume integer,
    somar varchar(1),
    contafrete varchar(1),
    enviar varchar(1),
    conferido varchar(1),
    lote integer,
    fechamento timestamp,
    finalizado varchar(1),
    totalcustotabela numeric(15,2),
    valorst numeric(8,2),
    ordemcompra varchar(60),
    totalvalorvenda numeric(15,2),
    totalvariacao numeric(15,2),
    totalcomissao numeric(15,2),
    cancelamento timestamp,
    duppedido varchar(10),
    dupfuncionario integer,
    dupdata date,
    dupfilial integer)
as
declare variable varclifor integer;
BEGIN
    TABELAPRECO = 10||:TABELAPRECO;
    SELECT FIRST 1 CLIFOR.CODIGO
    FROM CLIFOR
    WHERE CLIFOR.CNPJ = :CLIFOR
    ORDER BY ATIVO, FILIAL DESC
    INTO :VARCLIFOR;
    INSERT INTO PEDIDO
    (
        NUMERO,
        FILIAL,
        CLIFOR,
        TIPOPEDIDO,
        EMISSAO,
        ENTREGA,
        FORMAPAGAMENTO,
        CONDICAOPAGAMENTO,
        TOTALPRODUTO,
        TOTALRETORNO,
        PERCDESCONTO,
        VALORDESCONTO,
        PERCACRESCIMO,
        VALORACRESCIMO,
        VALORFRETE,
        TOTAL,
        PESOBRUTO,
        PESOLIQUIDO,
        OBS,
        FUNCIONARIO,
        PEDIDO,
        IMPRESSO,
        ATUALIZADO,
        TABELAPRECO,
        CONTADORIMPRESSAO,
        CANCELADO,
        FATURADO,
        HORA,
        DIGITACAO,
        TOTALQTDEPRODUTO,
        TOTALSERVICO,
        INFADICIONAL,
        COMISSAO,
        VOLUME,
        SOMAR,
        CONTAFRETE,
        ENVIAR,
        CONFERIDO,
        LOTE,
        FECHAMENTO,
        FINALIZADO,
        TOTALCUSTOTABELA,
        VALORST,
        ORDEMCOMPRA,
        TOTALVALORVENDA,
        TOTALVARIACAO,
        TOTALCOMISSAO,
        CANCELAMENTO,
        DUPPEDIDO,
        DUPFUNCIONARIO,
        DUPDATA,
        DUPFILIAL
    ) VALUES
    (
        :NUMERO,
        :FILIAL,
        :VARCLIFOR,
        :TIPOPEDIDO,
        :EMISSAO,
        :ENTREGA,
        :FORMAPAGAMENTO,
        :CONDICAOPAGAMENTO,
        :TOTALPRODUTO,
        :TOTALRETORNO,
        :PERCDESCONTO,
        :VALORDESCONTO,
        :PERCACRESCIMO,
        :VALORACRESCIMO,
        :VALORFRETE,
        :TOTAL,
        :PESOBRUTO,
        :PESOLIQUIDO,
        :OBS,
        :FUNCIONARIO,
        :PEDIDO,
        :IMPRESSO,
        :ATUALIZADO,
        :TABELAPRECO,
        :CONTADORIMPRESSAO,
        :CANCELADO,
        :FATURADO,
        :HORA,
        :DIGITACAO,
        :TOTALQTDEPRODUTO,
        :TOTALSERVICO,
        :INFADICIONAL,
        :COMISSAO,
        :VOLUME,
        :SOMAR,
        :CONTAFRETE,
        :ENVIAR,
        :CONFERIDO,
        :LOTE,
        :FECHAMENTO,
        :FINALIZADO,
        :TOTALCUSTOTABELA,
        :VALORST,
        :ORDEMCOMPRA,
        :TOTALVALORVENDA,
        :TOTALVARIACAO,
        :TOTALCOMISSAO,
        :CANCELAMENTO,
        :DUPPEDIDO,
        :DUPFUNCIONARIO,
        :DUPDATA,
        :DUPFILIAL
    );
END^

SET TERM ; ^

