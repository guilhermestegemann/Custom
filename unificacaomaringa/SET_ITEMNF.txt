SET TERM ^ ;

CREATE OR ALTER procedure cus_setitemnf (
    numero integer,
    serie varchar(5),
    filial integer,
    origem varchar(1),
    produto integer,
    item integer,
    qtde numeric(15,3),
    unitario numeric(15,6),
    percdesconto numeric(8,2),
    valordesconto numeric(8,2),
    total numeric(15,2),
    cst varchar(3),
    redicms numeric(15,2),
    baseicms numeric(15,2),
    valoricms numeric(15,2),
    basesubstituicao numeric(15,2),
    precomaximoconsumidor numeric(15,2),
    percsubstituicao numeric(15,3),
    margemsubstituicao numeric(15,2),
    reducaosubstituicao numeric(15,2),
    valorsubstituicao numeric(15,2),
    valorst numeric(15,2),
    basest numeric(15,2),
    valorressarcimentost numeric(15,2),
    valorisento numeric(15,2),
    baseipi numeric(15,2),
    percipi numeric(15,3),
    valoripi numeric(15,2),
    basefunrural numeric(15,2),
    valorfunrural numeric(15,2),
    cstpis varchar(2),
    valorpautapis numeric(15,4),
    basepis numeric(15,2),
    valorpis numeric(15,2),
    valorcontabil numeric(15,2),
    qtdedevolvido numeric(15,3),
    cstcofins varchar(2),
    basecofins numeric(15,2),
    valorcofins numeric(15,2),
    valorpautacofins numeric(15,4),
    recalcular varchar(1),
    valorcusto numeric(15,6),
    valorsimples numeric(15,2),
    valorpublica numeric(15,2),
    valorvenda numeric(15,6),
    valorfundesa numeric(15,6),
    tabelapreco integer,
    pesobruto numeric(15,3),
    pesoembalagem numeric(15,3),
    pesoliquido numeric(15,3),
    valorfrete numeric(15,2),
    valorseguro numeric(15,2),
    valoroutro numeric(15,2),
    volume integer,
    qtdevolume numeric(15,3),
    qtdemultiplaentrada numeric(15,6),
    comissao numeric(15,2),
    valorisentopis numeric(15,2),
    valorisentocofins numeric(15,2),
    cstipi varchar(2),
    percpis numeric(15,3),
    perccofins numeric(15,3),
    valorpautaipi numeric(15,4),
    valorisentoipi numeric(15,2),
    baseii numeric(15,2),
    valordespesaaduaneira numeric(15,2),
    valorii numeric(15,2),
    valoriof numeric(15,2),
    valoricmsdiferimento numeric(15,2),
    percicmsdiferimento numeric(15,2),
    valorretido numeric(15,6),
    ufconsumo varchar(2),
    basecide numeric(15,3),
    aliquotacide numeric(15,4),
    valorcide numeric(15,2),
    valorsenar numeric(15,2),
    valordescontosimples numeric(15,2),
    cstorigem varchar(10),
    baseressarcimentost numeric(15,2),
    valortotaltributo numeric(15,2),
    fci integer,
    unidademedida varchar(6),
    itemordemcompra integer,
    valorcustotabelaanterior numeric(15,2),
    regradesconto integer,
    valorcreditopresumido numeric(15,2),
    basecreditopresumido numeric(15,2),
    perccreditopresumido numeric(15,4),
    baseressarcimentoicms numeric(15,2),
    valorressarcimentoicms numeric(15,2),
    enquadramentolegalipi varchar(3),
    valoricmsdestino numeric(15,2),
    valordifal numeric(15,2),
    valorpartilhaorigem numeric(15,2),
    valorpartilhadestino numeric(15,2),
    percfcep numeric(15,4),
    valorfcep numeric(15,2),
    percicmsinterna numeric(15,4),
    percdestino numeric(15,4),
    codigoncm varchar(8),
    cest varchar(9),
    baseicmsinterestadual numeric(15,2),
    percicmsinterestadual numeric(15,4),
    basefcep numeric(15,2),
    motivoicmsdesonerado integer,
    valoricmsdesonerado numeric(15,2),
    baseicmsdesonerado numeric(15,2),
    valorfcpst numeric(15,2),
    valoripidevolvido numeric(15,2),
    percst numeric(15,2),
    percsimples numeric(15,2),
    basefcpst numeric(15,2),
    percfcpst numeric(15,2),
    basefcpstret numeric(15,2),
    percfcpstret numeric(15,2),
    valorfcpstret numeric(15,2),
    basefcpufdest numeric(15,2),
    percfcpufdest numeric(15,2),
    valorfcpufdest numeric(15,2),
    valorcotacapital numeric(15,2),
    baseefet numeric(15,2),
    percicmsefet numeric(15,2),
    valoricmsefet numeric(15,2),
    redicmsefet numeric(15,2),
    percicms numeric(15,3))
as
declare variable varclifor integer;
BEGIN
    TABELAPRECO = 10||TABELAPRECO;
    SELECT NF.CLIFOR
    FROM NF
    WHERE NF.NUMERO = :NUMERO
    AND NF.SERIE = :SERIE
    AND NF.FILIAL = :FILIAL
    AND NF.ORIGEM = :ORIGEM
    INTO :VARCLIFOR;
    INSERT INTO ITEMNF
    (
        CLIFOR,
        NUMERO,
        SERIE,
        FILIAL,
        ORIGEM,
        PRODUTO,
        ITEM,
        QTDE,
        UNITARIO,
        PERCDESCONTO,
        VALORDESCONTO,
        TOTAL,
        CST,
        REDICMS,
        BASEICMS,
        VALORICMS,
        BASESUBSTITUICAO,
        PRECOMAXIMOCONSUMIDOR,
        PERCSUBSTITUICAO,
        MARGEMSUBSTITUICAO,
        REDUCAOSUBSTITUICAO,
        VALORSUBSTITUICAO,
        VALORST,
        BASEST,
        VALORRESSARCIMENTOST,
        VALORISENTO,
        BASEIPI,
        PERCIPI,
        VALORIPI,
        BASEFUNRURAL,
        VALORFUNRURAL,
        CSTPIS,
        VALORPAUTAPIS,
        BASEPIS,
        VALORPIS,
        VALORCONTABIL,
        QTDEDEVOLVIDO,
        CSTCOFINS,
        BASECOFINS,
        VALORCOFINS,
        VALORPAUTACOFINS,
        RECALCULAR,
        VALORCUSTO,
        VALORSIMPLES,
        VALORPUBLICA,
        VALORVENDA,
        VALORFUNDESA,
        TABELAPRECO,
        PESOBRUTO,
        PESOEMBALAGEM,
        PESOLIQUIDO,
        VALORFRETE,
        VALORSEGURO,
        VALOROUTRO,
        VOLUME,
        QTDEVOLUME,
        QTDEMULTIPLAENTRADA,
        COMISSAO,
        VALORISENTOPIS,
        VALORISENTOCOFINS,
        CSTIPI,
        PERCPIS,
        PERCCOFINS,
        VALORPAUTAIPI,
        VALORISENTOIPI,
        BASEII,
        VALORDESPESAADUANEIRA,
        VALORII,
        VALORIOF,
        VALORICMSDIFERIMENTO,
        PERCICMSDIFERIMENTO,
        VALORRETIDO,
        UFCONSUMO,
        BASECIDE,
        ALIQUOTACIDE,
        VALORCIDE,
        VALORSENAR,
        VALORDESCONTOSIMPLES,
        CSTORIGEM,
        BASERESSARCIMENTOST,
        VALORTOTALTRIBUTO,
        FCI,
        UNIDADEMEDIDA,
        ITEMORDEMCOMPRA,
        VALORCUSTOTABELAANTERIOR,
        REGRADESCONTO,
        VALORCREDITOPRESUMIDO,
        BASECREDITOPRESUMIDO,
        PERCCREDITOPRESUMIDO,
        BASERESSARCIMENTOICMS,
        VALORRESSARCIMENTOICMS,
        ENQUADRAMENTOLEGALIPI,
        VALORICMSDESTINO,
        VALORDIFAL,
        VALORPARTILHAORIGEM,
        VALORPARTILHADESTINO,
        PERCFCEP,
        VALORFCEP,
        PERCICMSINTERNA,
        PERCDESTINO,
        CODIGONCM,
        CEST,
        BASEICMSINTERESTADUAL,
        PERCICMSINTERESTADUAL,
        BASEFCEP,
        MOTIVOICMSDESONERADO,
        VALORICMSDESONERADO,
        BASEICMSDESONERADO,
        VALORFCPST,
        VALORIPIDEVOLVIDO,
        PERCST,
        PERCSIMPLES,
        BASEFCPST,
        PERCFCPST,
        BASEFCPSTRET,
        PERCFCPSTRET,
        VALORFCPSTRET,
        BASEFCPUFDEST,
        PERCFCPUFDEST,
        VALORFCPUFDEST,
        VALORCOTACAPITAL,
        BASEEFET,
        PERCICMSEFET,
        VALORICMSEFET,
        REDICMSEFET,
        PERCICMS
    ) VALUES
    (
        :VARCLIFOR,
        :NUMERO,
        :SERIE,
        :FILIAL,
        :ORIGEM,
        :PRODUTO,
        :ITEM,
        :QTDE,
        :UNITARIO,
        :PERCDESCONTO,
        :VALORDESCONTO,
        :TOTAL,
        :CST,
        :REDICMS,
        :BASEICMS,
        :VALORICMS,
        :BASESUBSTITUICAO,
        :PRECOMAXIMOCONSUMIDOR,
        :PERCSUBSTITUICAO,
        :MARGEMSUBSTITUICAO,
        :REDUCAOSUBSTITUICAO,
        :VALORSUBSTITUICAO,
        :VALORST,
        :BASEST,
        :VALORRESSARCIMENTOST,
        :VALORISENTO,
        :BASEIPI,
        :PERCIPI,
        :VALORIPI,
        :BASEFUNRURAL,
        :VALORFUNRURAL,
        :CSTPIS,
        :VALORPAUTAPIS,
        :BASEPIS,
        :VALORPIS,
        :VALORCONTABIL,
        :QTDEDEVOLVIDO,
        :CSTCOFINS,
        :BASECOFINS,
        :VALORCOFINS,
        :VALORPAUTACOFINS,
        :RECALCULAR,
        :VALORCUSTO,
        :VALORSIMPLES,
        :VALORPUBLICA,
        :VALORVENDA,
        :VALORFUNDESA,
        :TABELAPRECO,
        :PESOBRUTO,
        :PESOEMBALAGEM,
        :PESOLIQUIDO,
        :VALORFRETE,
        :VALORSEGURO,
        :VALOROUTRO,
        :VOLUME,
        :QTDEVOLUME,
        :QTDEMULTIPLAENTRADA,
        :COMISSAO,
        :VALORISENTOPIS,
        :VALORISENTOCOFINS,
        :CSTIPI,
        :PERCPIS,
        :PERCCOFINS,
        :VALORPAUTAIPI,
        :VALORISENTOIPI,
        :BASEII,
        :VALORDESPESAADUANEIRA,
        :VALORII,
        :VALORIOF,
        :VALORICMSDIFERIMENTO,
        :PERCICMSDIFERIMENTO,
        :VALORRETIDO,
        :UFCONSUMO,
        :BASECIDE,
        :ALIQUOTACIDE,
        :VALORCIDE,
        :VALORSENAR,
        :VALORDESCONTOSIMPLES,
        :CSTORIGEM,
        :BASERESSARCIMENTOST,
        :VALORTOTALTRIBUTO,
        :FCI,
        :UNIDADEMEDIDA,
        :ITEMORDEMCOMPRA,
        :VALORCUSTOTABELAANTERIOR,
        :REGRADESCONTO,
        :VALORCREDITOPRESUMIDO,
        :BASECREDITOPRESUMIDO,
        :PERCCREDITOPRESUMIDO,
        :BASERESSARCIMENTOICMS,
        :VALORRESSARCIMENTOICMS,
        :ENQUADRAMENTOLEGALIPI,
        :VALORICMSDESTINO,
        :VALORDIFAL,
        :VALORPARTILHAORIGEM,
        :VALORPARTILHADESTINO,
        :PERCFCEP,
        :VALORFCEP,
        :PERCICMSINTERNA,
        :PERCDESTINO,
        :CODIGONCM,
        :CEST,
        :BASEICMSINTERESTADUAL,
        :PERCICMSINTERESTADUAL,
        :BASEFCEP,
        :MOTIVOICMSDESONERADO,
        :VALORICMSDESONERADO,
        :BASEICMSDESONERADO,
        :VALORFCPST,
        :VALORIPIDEVOLVIDO,
        :PERCST,
        :PERCSIMPLES,
        :BASEFCPST,
        :PERCFCPST,
        :BASEFCPSTRET,
        :PERCFCPSTRET,
        :VALORFCPSTRET,
        :BASEFCPUFDEST,
        :PERCFCPUFDEST,
        :VALORFCPUFDEST,
        :VALORCOTACAPITAL,
        :BASEEFET,
        :PERCICMSEFET,
        :VALORICMSEFET,
        :REDICMSEFET,
        :PERCICMS
    );
END^

SET TERM ; ^

